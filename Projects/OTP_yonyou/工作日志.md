# 工作日志

### 有效改进

* crm dll 通过反射解决了不装CRM模块而系统可以正常加载附件的问题
* 增加移动考勤，地图接口
* X18.0修改加载事件指定应用路径
* link服务器程序里面域名访问地址修成成从配置文件加载6as.yonyou.com 下载网站协议改造(支持https://)
* 隐私协议版本管理1.0，需要给前端提供1个输出相关信息接口的功能
* 支持移动审批功能脚本的预置
* 订单同步工具
* 密码转换工具 明文和加密
* 新网报小程序加密控制
* MA移动选项设置

‍

|序号|功能描述|业务背景|开始日期|结束日期|有效工作量|代码提交位置|
| ------| --------------------------------------------------------------------------------------------------------------------------------| -------------------------------------------------------------------------------------------------------------------| -----------| -----------| ------------| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|1|移动考勤小程序解决移动考勤崩溃的问题|微信小程序需要提供高德地图的坐标，申请高德地图的中文的地址转换和相关接口api的书写。|2023.5|2023.6||云端程序部署。git@git.yonyou.com:UP-UM/UM-ELINK.git|
|2|crm dll  通过反射重构代码解决了不装CRM模块而系统可以正常加载附件的问题|不安装CRM模块会导致单据打开附件报错|2023.5|2023.6||yonyouup.ma.attach.dll。git@git.yonyou.com:UP-PUBLIC/PUBLIC-MA.git|
|3|隐私协议版本管理1.0，需要给前端提供1个输出相关版本信息接口的功能。|配合集团安全部整改，需要提供一个协议版本的接口|2023.5|2023.6||云端部署wxservice。git@git.yonyou.com:UP-UM/UM-ELINK.git|
|4|支持移动审批功能脚本的预置文档|伙伴和业务开发人员需要一个移动审批配置的脚本|2023.6|2023.6||移动审批二次开发预置说明.docx  git@git.yonyou.com:UP-UM/UM-ELINK.git|
|5|18.0  所有删除dll的程序都修改成去指定路径引用，web程序通过添加global.asax.cs的加载事件。Client程序通过在程序入口位置增加事件。|删掉多余的dll，导致各种程序调用崩溃|2023.6|2023.6||所有多引用dll的地方，包括eis,uis，各种webservice。 git@git.yonyou.com:UP-PUBLIC/PUBLIC-MA.git git@git.yonyou.com:UP-PUBLIC/PUBLIC-UAP.git git@git.yonyou.com:UP-UM/ULink.git|
|6|云端程序迁移把程序里面的引用地址迁移到webconfig里面|迁移方便|2023.6|2023.6||云端程序部署(迁移完毕一起补充)|
|7|as.yonyouup.com下载网站协议改造|以前是http协议，集团安全部要求https协议。修改了资源的重定向地址，增加了外层的https转发，增加了http默认向https跳转|2023.6|2023.7||下载服务器的部署  git@git.yonyou.com:UP-UM/UM-ELINK.git|
|8|完成U8选项配置功能|收款单正负数问题|2023.7.26|2023.7.28||出补丁，脚本。git@git.yonyou.com:UP-PUBLIC/PUBLIC-MA.git|
|9|修改考勤支持离线模式下使用配置文件。18.0|考勤小程序修改了配置文件没法上传资源网站，直接改为离线模式。|2023.8.1|2023.8.2||代码  git@git.yonyou.com:UP-PUBLIC/PUBLIC-UAP.git|

‍

‍

### 解决方案

1. 易特天下组网远程唤醒
2. 报表执行慢，然后分时定时任务执行，把想要执行的sql条件提前预置。缓冲查询
3. 配置项用一个单据的N条数据来存储。

4. 审计---操作日志

5. 批量打印，在列表选择打印模板和打印机
6. 调用单据模板的打印html输出---------查看单据详情
7. 在单据上面加按钮配置方法，流程的扭转和数据的改变。
8. 默认值，设置一张存货编码为9999的存货，不同的模板设置不同的默认值比如8888，然后给单据赋默认值的时候选用不同的模板。
9. 不是直接在存货档案上面增加字段，而是新建一个档案同步存货档案，然后在这个同步档案上面加一下自定义字段。

### ToDo

1. 隐私协议(界面和接口)
2. 微信小程序网报占用许可问题
3. 迁移服务器问题（友空间和移动U8+ APP）
4. 上传git代码
5.  ~~配置项的问题~~
6. ~~jira 16.5账套18.0登录问题~~
7. 辛国栋，修改url的问题
8. iis cpu 占用问题

调试的时候技巧

            if (!Debugger.IsAttached)  
            {  
                Debugger.Launch();

            }  
            Debugger.Break();
