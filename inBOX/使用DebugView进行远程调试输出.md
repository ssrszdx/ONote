# 使用DebugView进行远程调试输出

‍

作者：BlogUpdater |  时间：2019-06-02 |  浏览：1553 |  评论已关闭 条评论

**问题**  
在一次开发过程中，远程机器已经进入了锁屏模式，这个时候如果想得到远程主机上的调试信息就比较困难了。那么，到底有没有办法呢？

**解决方法**  
使用DebugView工具的远程调试输出功能，可以解决上述问题。

**具体方法**

1. 使用命令行工具(CMD)定位远程主机DebugView所在的目录，然后在命令行下执行：dbgview /a，执行此命令后，DebugView工具会以Agent模式运行。在这个模式下，DebugView会等待主控机器的连接请求，当主控机器连接成功后，所有在远程主机上的调试输出，都会转发至主控机器。也就实现了远程调试信息输出的功能。  
    ![](0.9571992355267397-20220205003229-uparm3n.png)
2. 主控机器启动DebugView，并断开默认情况下的到本机的连接。  
    ![](0.02962117764052273-20220205003229-wkw3w5e.png)
3. 点击菜单Connect，并输入远程主机的IP地址或者计算机名，然后点击OK。  
    ![](0.6787600111574653-20220205003229-as0ahgf.png)
4. 主控主机连接远程主机成功，会弹出提示对话框。  
    ![](0.5359138034786675-20220205003229-onu8wp1.png)
5. 远程主机接受主控机器的连接请求，并成功建立连接后，会弹出提示对话框。  
    ![](0.41344207844416647-20220205003229-q10ukwo.png)

**测试**  
测试的方法比较简单，在远程主机上的程序调用OutputDebugString时，如果一切顺利，远程主机上输出的调试信息会出现在主控机器上的DebugView中。这里就不给出具体的示例了。

**总结**

1. DebugView的远程调试机制，非常适用于远程主机上无法显示调试信息的情形，比如上面说的锁屏模式。
2. 因为远程主机和主控机器使用TCP/IP协议进行调试信息收发，所以如果远程主机的调试信息以非常快的频率输出，则会出现这样一种情况：输出调试信息的远程主机上的进程已经退出了，但是主控机器的DebugView工具还是在源源不断的输出该远程进程的调试信息。这个是因为：调试信息已经保存在DebugView的内部缓冲区里了，虽然输出进程退出了，但是这些调试信息并没有丢失，会一直转发，直至全部转发完毕。
